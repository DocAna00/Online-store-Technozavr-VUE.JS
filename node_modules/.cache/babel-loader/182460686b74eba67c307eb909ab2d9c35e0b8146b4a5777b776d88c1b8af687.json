{"ast":null,"code":"import _objectSpread from \"/Users/anadoc/Desktop/Skillbox Anastasia/Skillbox Projects/Vue.js Shop/Vue.js/07_api_1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/web.timers.js\";\nimport ProductList from '@/components/ProductList.vue';\nimport BasePaginatioan from '@/components/BasePaginatioan.vue';\nimport ProductFilter from '@/components/ProductFilter.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\nexport default {\n  components: {\n    ProductList: ProductList,\n    BasePaginatioan: BasePaginatioan,\n    ProductFilter: ProductFilter\n  },\n  data: function data() {\n    return {\n      filterPriceFrom: 0,\n      filterPriceTo: 0,\n      filterCategoryId: 0,\n      filterColorId: 0,\n      page: 1,\n      productsPerPage: 3,\n      productsData: null,\n      productsLoading: productsLoading\n    };\n  },\n  computed: {\n    products: function products() {\n      return this.productsData ? this.productsData.items.map(function (product) {\n        return _objectSpread(_objectSpread({}, product), {}, {\n          image: product.image.file.url\n        });\n      }) : [];\n    },\n    countProducts: function countProducts() {\n      return this.productsData ? this.productsData.pagination.total : 0;\n    }\n  },\n  methods: {\n    loadProducts: function loadProducts() {\n      var _this = this;\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(function () {\n        axios.get(API_BASE_URL + \"/api/products\", {\n          params: {\n            page: _this.page,\n            limit: _this.productsPerPage,\n            categoryId: _this.filterCategoryId,\n            minPrice: _this.filterPriceFrom,\n            maxPrice: _this.filterPriceTo,\n            colorId: _this.filterColorId\n          }\n        }).then(function (response) {\n          return _this.productsData = response.data;\n        });\n      }, 0);\n    }\n  },\n  watch: {\n    page: function page() {\n      this.loadProducts();\n    },\n    filterPriceFrom: function filterPriceFrom() {\n      this.loadProducts();\n    },\n    filterPriceTo: function filterPriceTo() {\n      this.loadProducts();\n    },\n    filterCategoryId: function filterCategoryId() {\n      this.loadProducts();\n    },\n    filterColorId: function filterColorId() {\n      this.loadProducts();\n    }\n  },\n  created: function created() {\n    this.loadProducts();\n  }\n};","map":{"version":3,"names":["ProductList","BasePaginatioan","ProductFilter","axios","API_BASE_URL","components","data","filterPriceFrom","filterPriceTo","filterCategoryId","filterColorId","page","productsPerPage","productsData","productsLoading","computed","products","items","map","product","_objectSpread","image","file","url","countProducts","pagination","total","methods","loadProducts","_this","clearTimeout","loadProductsTimer","setTimeout","get","params","limit","categoryId","minPrice","maxPrice","colorId","then","response","watch","created"],"sources":["src/pages/MainPage.vue"],"sourcesContent":["<template>\n  <main class=\"content container\">\n    <div class=\"content__top content__top--catalog\">\n      <h1 class=\"content__title\">\n        Каталог\n      </h1>\n      <span class=\"content__info\">\n        152 товара\n      </span>\n    </div>\n    <div class=\"content__catalog\">\n      <ProductFilter :price-from.sync=\"filterPriceFrom\" :price-to.sync=\"filterPriceTo\"\n        :category-id.sync=\"filterCategoryId\" :color-id.sync=\"filterColorId\"></ProductFilter>\n      <section class=\"catalog\">\n        <ProductList :products=\"products\"></ProductList>\n        <BasePaginatioan v-model=\"page\" :count=\"countProducts\" :per-page=\"productsPerPage\"></BasePaginatioan>\n      </section>\n\n    </div>\n  </main>\n</template>\n\n<script>\nimport ProductList from '@/components/ProductList.vue';\nimport BasePaginatioan from '@/components/BasePaginatioan.vue';\nimport ProductFilter from '@/components/ProductFilter.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\n\nexport default {\n  components: { ProductList, BasePaginatioan, ProductFilter },\n  data() {\n    return {\n      filterPriceFrom: 0,\n      filterPriceTo: 0,\n      filterCategoryId: 0,\n      filterColorId: 0,\n      page: 1,\n      productsPerPage: 3,\n      productsData: null,\n      productsLoading\n    }\n  },\n  computed: {\n    products() {\n      return this.productsData\n        ? this.productsData.items.map(product => {\n          return {\n            ...product,\n            image: product.image.file.url\n          }\n        }) : [];\n    },\n    countProducts() {\n      return this.productsData ? this.productsData.pagination.total : 0;\n    }\n  },\n  methods: {\n    loadProducts() {\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(() => {\n        axios.get(API_BASE_URL + `/api/products`, {\n          params: {\n            page: this.page,\n            limit: this.productsPerPage,\n            categoryId: this.filterCategoryId,\n            minPrice: this.filterPriceFrom,\n            maxPrice: this.filterPriceTo,\n            colorId: this.filterColorId\n          }\n        })\n          .then(response => this.productsData = response.data);\n      }, 0);\n    }\n  },\n  watch: {\n    page() {\n      this.loadProducts();\n    },\n    filterPriceFrom() {\n      this.loadProducts();\n    },\n    filterPriceTo() {\n      this.loadProducts();\n    },\n    filterCategoryId() {\n      this.loadProducts();\n    },\n    filterColorId() {\n      this.loadProducts();\n    }\n  },\n  created() {\n    this.loadProducts();\n  }\n}\n</script>"],"mappings":";;;AAuBA,OAAAA,WAAA;AACA,OAAAC,eAAA;AACA,OAAAC,aAAA;AACA,OAAAC,KAAA;AACA,SAAAC,YAAA;AAEA;EACAC,UAAA;IAAAL,WAAA,EAAAA,WAAA;IAAAC,eAAA,EAAAA,eAAA;IAAAC,aAAA,EAAAA;EAAA;EACAI,IAAA,WAAAA,KAAA;IACA;MACAC,eAAA;MACAC,aAAA;MACAC,gBAAA;MACAC,aAAA;MACAC,IAAA;MACAC,eAAA;MACAC,YAAA;MACAC,eAAA,EAAAA;IACA;EACA;EACAC,QAAA;IACAC,QAAA,WAAAA,SAAA;MACA,YAAAH,YAAA,GACA,KAAAA,YAAA,CAAAI,KAAA,CAAAC,GAAA,WAAAC,OAAA;QACA,OAAAC,aAAA,CAAAA,aAAA,KACAD,OAAA;UACAE,KAAA,EAAAF,OAAA,CAAAE,KAAA,CAAAC,IAAA,CAAAC;QAAA;MAEA;IACA;IACAC,aAAA,WAAAA,cAAA;MACA,YAAAX,YAAA,QAAAA,YAAA,CAAAY,UAAA,CAAAC,KAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA,WAAAA,aAAA;MAAA,IAAAC,KAAA;MACAC,YAAA,MAAAC,iBAAA;MACA,KAAAA,iBAAA,GAAAC,UAAA;QACA7B,KAAA,CAAA8B,GAAA,CAAA7B,YAAA;UACA8B,MAAA;YACAvB,IAAA,EAAAkB,KAAA,CAAAlB,IAAA;YACAwB,KAAA,EAAAN,KAAA,CAAAjB,eAAA;YACAwB,UAAA,EAAAP,KAAA,CAAApB,gBAAA;YACA4B,QAAA,EAAAR,KAAA,CAAAtB,eAAA;YACA+B,QAAA,EAAAT,KAAA,CAAArB,aAAA;YACA+B,OAAA,EAAAV,KAAA,CAAAnB;UACA;QACA,GACA8B,IAAA,WAAAC,QAAA;UAAA,OAAAZ,KAAA,CAAAhB,YAAA,GAAA4B,QAAA,CAAAnC,IAAA;QAAA;MACA;IACA;EACA;EACAoC,KAAA;IACA/B,IAAA,WAAAA,KAAA;MACA,KAAAiB,YAAA;IACA;IACArB,eAAA,WAAAA,gBAAA;MACA,KAAAqB,YAAA;IACA;IACApB,aAAA,WAAAA,cAAA;MACA,KAAAoB,YAAA;IACA;IACAnB,gBAAA,WAAAA,iBAAA;MACA,KAAAmB,YAAA;IACA;IACAlB,aAAA,WAAAA,cAAA;MACA,KAAAkB,YAAA;IACA;EACA;EACAe,OAAA,WAAAA,QAAA;IACA,KAAAf,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
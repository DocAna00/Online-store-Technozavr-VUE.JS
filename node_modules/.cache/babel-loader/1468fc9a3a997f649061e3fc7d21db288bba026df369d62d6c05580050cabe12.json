{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport ProductList from '@/components/ProductList.vue';\nimport BasePaginatioan from '@/components/BasePaginatioan.vue';\nimport ProductFilter from '@/components/ProductFilter.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\nexport default {\n  components: {\n    ProductList: ProductList,\n    BasePaginatioan: BasePaginatioan,\n    ProductFilter: ProductFilter\n  },\n  // data() {\n  //   return {\n  //     filterPriceFrom: 0,\n  //     filterPriceTo: 0,\n  //     filterCategoryId: 0,\n  //     filterColorId: 0,\n  //     page: 1,\n  //     productsPerPage: 12,\n  //     productsData: null,\n  //     productsLoading: false,\n  //     productsLoadingFailed: false\n  //   }\n  // },\n  // computed: {\n  //   products() {\n  //     return this.productsData\n  //       ? this.productsData.items.map(product => {\n  //         return {\n  //           ...product,\n  //           image: product.image.file.url\n  //         }\n  //       }) : [];\n  //   },\n  //   countProducts() {\n  //     return this.productsData ? this.productsData.pagination.total : 0;\n  //   }\n  // },\n  methods: {\n    loadProducts: function loadProducts() {\n      var _this = this;\n      this.productsLoading = true;\n      this.productsLoadingFailed = false;\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(function () {\n        axios.get(API_BASE_URL + \"/api/products\").then(function (response) {\n          return _this.productsData = response.data;\n        })[\"catch\"](function () {\n          return _this.productsLoadingFailed = true;\n        }).then(function () {\n          return _this.productsLoading = false;\n        });\n      }, 0);\n    }\n  },\n  watch: {\n    page: function page() {\n      this.loadProducts();\n    },\n    filterPriceFrom: function filterPriceFrom() {\n      this.loadProducts();\n    },\n    filterPriceTo: function filterPriceTo() {\n      this.loadProducts();\n    },\n    filterCategoryId: function filterCategoryId() {\n      this.loadProducts();\n    },\n    filterColorId: function filterColorId() {\n      this.loadProducts();\n    }\n  },\n  created: function created() {\n    this.loadProducts();\n  }\n};","map":{"version":3,"names":["ProductList","BasePaginatioan","ProductFilter","axios","API_BASE_URL","components","methods","loadProducts","_this","productsLoading","productsLoadingFailed","clearTimeout","loadProductsTimer","setTimeout","get","then","response","productsData","data","watch","page","filterPriceFrom","filterPriceTo","filterCategoryId","filterColorId","created"],"sources":["src/pages/MainPage.vue"],"sourcesContent":["<template>\n  <main class=\"content container\">\n    <div class=\"content__top content__top--catalog\">\n      <h1 class=\"content__title\">\n        Каталог\n      </h1>\n      <span class=\"content__info\">\n        152 товара\n      </span>\n    </div>\n    <div class=\"content__catalog\">\n      <ProductFilter :price-from.sync=\"filterPriceFrom\" :price-to.sync=\"filterPriceTo\"\n        :category-id.sync=\"filterCategoryId\" :color-id.sync=\"filterColorId\"></ProductFilter>\n      <section class=\"catalog\">\n        <div v-if=\"productsLoading\" style=\"font-size: 25px; text-align: center\"><img src=\"../1488.gif\"\n            style=\"vertical-align: middle; padding-right: 5px\">Загрузка товаров...</div>\n        <div v-if=\"productsLoadingFailed\">Произошла ошибка при загрузке товаров\n          <button @click.prevent=\"loadProducts\">Перезагрузить страницу</button>\n        </div>\n        <ProductList :products=\"products\"></ProductList>\n        <BasePaginatioan v-model=\"page\" :count=\"countProducts\" :per-page=\"productsPerPage\"></BasePaginatioan>\n      </section>\n\n    </div>\n  </main>\n</template>\n\n<script>\nimport ProductList from '@/components/ProductList.vue';\nimport BasePaginatioan from '@/components/BasePaginatioan.vue';\nimport ProductFilter from '@/components/ProductFilter.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\n\nexport default {\n  components: { ProductList, BasePaginatioan, ProductFilter },\n  // data() {\n  //   return {\n  //     filterPriceFrom: 0,\n  //     filterPriceTo: 0,\n  //     filterCategoryId: 0,\n  //     filterColorId: 0,\n  //     page: 1,\n  //     productsPerPage: 12,\n  //     productsData: null,\n  //     productsLoading: false,\n  //     productsLoadingFailed: false\n  //   }\n  // },\n  // computed: {\n  //   products() {\n  //     return this.productsData\n  //       ? this.productsData.items.map(product => {\n  //         return {\n  //           ...product,\n  //           image: product.image.file.url\n  //         }\n  //       }) : [];\n  //   },\n  //   countProducts() {\n  //     return this.productsData ? this.productsData.pagination.total : 0;\n  //   }\n  // },\n  methods: {\n    loadProducts() {\n      this.productsLoading = true;\n      this.productsLoadingFailed = false;\n      clearTimeout(this.loadProductsTimer);\n      this.loadProductsTimer = setTimeout(() => {\n        axios.get(API_BASE_URL + `/api/products`)\n          .then(response => this.productsData = response.data)\n          .catch(() => this.productsLoadingFailed = true)\n          .then(() => this.productsLoading = false);\n      }, 0);\n    }\n  },\n  watch: {\n    page() {\n      this.loadProducts();\n    },\n    filterPriceFrom() {\n      this.loadProducts();\n    },\n    filterPriceTo() {\n      this.loadProducts();\n    },\n    filterCategoryId() {\n      this.loadProducts();\n    },\n    filterColorId() {\n      this.loadProducts();\n    }\n  },\n  created() {\n    this.loadProducts();\n  }\n}\n</script>"],"mappings":";AA4BA,OAAAA,WAAA;AACA,OAAAC,eAAA;AACA,OAAAC,aAAA;AACA,OAAAC,KAAA;AACA,SAAAC,YAAA;AAEA;EACAC,UAAA;IAAAL,WAAA,EAAAA,WAAA;IAAAC,eAAA,EAAAA,eAAA;IAAAC,aAAA,EAAAA;EAAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAI,OAAA;IACAC,YAAA,WAAAA,aAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,eAAA;MACA,KAAAC,qBAAA;MACAC,YAAA,MAAAC,iBAAA;MACA,KAAAA,iBAAA,GAAAC,UAAA;QACAV,KAAA,CAAAW,GAAA,CAAAV,YAAA,oBACAW,IAAA,WAAAC,QAAA;UAAA,OAAAR,KAAA,CAAAS,YAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA,WACA;UAAA,OAAAV,KAAA,CAAAE,qBAAA;QAAA,GACAK,IAAA;UAAA,OAAAP,KAAA,CAAAC,eAAA;QAAA;MACA;IACA;EACA;EACAU,KAAA;IACAC,IAAA,WAAAA,KAAA;MACA,KAAAb,YAAA;IACA;IACAc,eAAA,WAAAA,gBAAA;MACA,KAAAd,YAAA;IACA;IACAe,aAAA,WAAAA,cAAA;MACA,KAAAf,YAAA;IACA;IACAgB,gBAAA,WAAAA,iBAAA;MACA,KAAAhB,YAAA;IACA;IACAiB,aAAA,WAAAA,cAAA;MACA,KAAAjB,YAAA;IACA;EACA;EACAkB,OAAA,WAAAA,QAAA;IACA,KAAAlB,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
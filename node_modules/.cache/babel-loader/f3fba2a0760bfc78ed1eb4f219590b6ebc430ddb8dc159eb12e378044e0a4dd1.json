{"ast":null,"code":"import _objectSpread from \"/Users/anadoc/Desktop/Skillbox Anastasia/Skillbox Projects/vue-final-project/final_project_vue.js/project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport gotoPage from '@/helpers/gotoPage';\nimport numberFormat from '@/helpers/numberFormat';\nimport CartAmountButtons from '@/components/CartAmountButtons.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\nimport { mapActions } from 'vuex';\nimport getColorCode from \"@/helpers/getColorCode\";\nimport BaseTabs from \"@/components/BaseTabs.vue\";\nimport BaseTab from \"@/components/BaseTab.vue\";\nimport MainPropOptions from \"@/components/MainPropOptions.vue\";\nexport default {\n  data: function data() {\n    return {\n      productAmount: 1,\n      productData: null,\n      productLoading: false,\n      productLoadingFailed: false,\n      productAdded: false,\n      productAddSending: false,\n      colorId: null,\n      productId: null\n    };\n  },\n  components: {\n    CartAmountButtons: CartAmountButtons,\n    BaseTabs: BaseTabs,\n    BaseTab: BaseTab,\n    MainPropOptions: MainPropOptions\n  },\n  filters: {\n    numberFormat: numberFormat\n  },\n  computed: {\n    product: function product() {\n      return this.productData ? _objectSpread(_objectSpread({}, this.productData), {}, {\n        image: this.productData.preview.file.url\n      }) : {};\n    },\n    category: function category() {\n      return this.productData.category;\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(['addProductToCart'])), {}, {\n    gotoPage: gotoPage,\n    getColorCode: getColorCode,\n    addToCart: function addToCart() {\n      var _this = this;\n      this.productAdded = false;\n      this.productAddSending = true;\n      this.addProductToCart({\n        productId: this.productId,\n        amount: this.productAmount,\n        colorId: this.colorId\n      }).then(function () {\n        _this.productAdded = true;\n        _this.productAddSending = false;\n      });\n    },\n    incrementAmount: function incrementAmount() {\n      return ++this.productAmount;\n    },\n    decrementAmount: function decrementAmount() {\n      if (this.productAmount > 1) {\n        return --this.productAmount;\n      }\n    },\n    loadProduct: function loadProduct() {\n      var _this2 = this;\n      this.productLoading = true;\n      this.productLoadingFailed = false;\n      axios.get(API_BASE_URL + '/api/products/' + this.$route.params.id).then(function (response) {\n        return _this2.productData = response.data;\n      }).then(function () {\n        _this2.colorId = _this2.product.colors[0].color.id;\n        _this2.productId = _this2.product.id;\n        _this2.productOfferId = _this2.product.offers[0].id;\n      })[\"catch\"](function () {\n        return _this2.productLoadingFailed = true;\n      }).then(function () {\n        return _this2.productLoading = false;\n      });\n    }\n  }),\n  watch: {\n    '$route.params.id': {\n      handler: function handler() {\n        this.loadProduct();\n      },\n      immediate: true\n    }\n  }\n};","map":{"version":3,"names":["gotoPage","numberFormat","CartAmountButtons","axios","API_BASE_URL","mapActions","getColorCode","BaseTabs","BaseTab","MainPropOptions","data","productAmount","productData","productLoading","productLoadingFailed","productAdded","productAddSending","colorId","productId","components","filters","computed","product","_objectSpread","image","preview","file","url","category","methods","addToCart","_this","addProductToCart","amount","then","incrementAmount","decrementAmount","loadProduct","_this2","get","$route","params","id","response","colors","color","productOfferId","offers","watch","handler","immediate"],"sources":["src/pages/ProductPage.vue"],"sourcesContent":["<template>\n    <main class=\"content container\" v-if=\"productLoading\">Загрузка товара...</main>\n    <main class=\"content container\" v-else-if=\"!productData\">Не удалось загрузить товар</main>\n    <main class=\"content container\" v-else=\"productData\">\n        <div class=\"content__top\">\n            <ul class=\"breadcrumbs\">\n                <li class=\"breadcrumbs__item\">\n                    <router-link class=\"breadcrumbs__link\" :to=\"{ name: 'main' }\">\n                        Каталог\n                    </router-link>\n                </li>\n                <li class=\"breadcrumbs__item\">\n                    <router-link class=\"breadcrumbs__link\" :to=\"{ name: 'main', query: { category: category.id } }\">\n                        {{ category.title }}\n                    </router-link>\n                </li>\n                <li class=\"breadcrumbs__item\">\n                    <a class=\"breadcrumbs__link\">\n                        {{ product.title }}\n                    </a>\n                </li>\n            </ul>\n        </div>\n\n        <section class=\"item\">\n            <div class=\"item__pics pics\">\n                <div class=\"pics__wrapper\">\n                    <img width=\"570\" height=\"570\" :src=\"product.preview.file.url\" :alt=\"product.title\">\n                </div>\n            </div>\n\n            <div class=\"item__info\">\n                <span class=\"item__code\">Артикул: {{ product.id }}</span>\n                <h2 class=\"item__title\">\n                    {{ product.title }}\n                </h2>\n                <div class=\"item__form\">\n                    <form class=\"form\" action=\"#\" method=\"POST\" @submit.prevent=\"addToCart\">\n                        <b class=\"item__price\">\n                            {{ product.price | numberFormat }} ₽\n                        </b>\n\n                        <fieldset class=\"form__block\" v-if=\"product.mainProp.id != 7\">\n                            <legend class=\"form__legend\">Цвет:</legend>\n                            <ul class=\"colors\">\n                                <li class=\"colors__item\" v-for=\"item in product.colors\" :key=\"item.id\">\n                                    <label class=\"colors__label\">\n                                        <input class=\"colors__radio sr-only\" type=\"radio\" name=\"color-item\"\n                                            :value=\"item.color.id\" v-model=\"colorId\" />\n                                        <span class=\"colors__value\" :style=\"{ 'background-color': item.color.code }\">\n                                        </span>\n                                    </label>\n                                </li>\n                            </ul>\n                        </fieldset>\n\n                        <fieldset class=\"form__block\">\n                            <legend class=\"form__legend\">{{ product.mainProp.title }}:</legend>\n                            <MainPropOptions :products=\"product.offers\" :price-update.sync=\"product.price\"\n                                :current-prop.sync=\"productId\" :current-prop-id.sync=\"product.mainProp.id\" />\n                        </fieldset>\n\n                        <div class=\"item__row\">\n                            <div class=\"form__counter\">\n                                <button type=\"button\" aria-label=\"Убрать один товар\" @click=\"decrementAmount\">\n                                    <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n                                        <use xlink:href=\"#icon-minus\"></use>\n                                    </svg>\n                                </button>\n\n                                <input type=\"text\" v-model.number=\"productAmount\" />\n\n                                <button type=\"button\" aria-label=\"Добавить один товар\" @click=\"incrementAmount\">\n                                    <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n                                        <use xlink:href=\"#icon-plus\"></use>\n                                    </svg>\n                                </button>\n                            </div>\n\n                            <button class=\"button button--primery\" type=\"submit\" :disabled=\"productAddSending\">\n                                В корзину\n                            </button>\n                        </div>\n                        <div v-show=\"productAdded\">Товар добавлен в корзину</div>\n                        <div v-show=\"productAddSending\">Добавляем товар в корзину...</div>\n                    </form>\n                </div>\n            </div>\n\n            <div class=\"item__desc\">\n                <BaseTabs>\n                    <BaseTab label=\"Описание\" :selected=\"true\">\n                        <div v-if=\"product.content\">{{ product.content }}</div>\n                        <div class=\"item__content\" v-else>\n                            <p>\n                                Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br />\n                                Синхронизация со смартфоном<br />\n                                Связь по Bluetooth Smart, ANT+ и Wi-Fi<br />\n                                Поддержка сторонних приложений<br />\n                            </p>\n                        </div>\n                    </BaseTab>\n                    <BaseTab label=\"Характеристики\">\n                        <div v-for=\"specification in product.specifications\">\n                            <h3>{{ specification.title }}</h3>\n                            <p>{{ specification.value }}</p>\n                        </div>\n                    </BaseTab>\n                    <BaseTab label=\"Гарантия\">\n                        <p>\n                            Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО.<br />\n                            Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в\n                            которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов.<br />\n                            Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по\n                            телефону 8 800 600 90 09<br />\n                        </p>\n                    </BaseTab>\n                    <BaseTab label=\"Оплата и доставка\">\n                        <p>\n                            1.Курьерская доставка по Москве и Московской области – 1200 ₽<br />\n                            2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь<br />\n                        </p>\n                    </BaseTab>\n                </BaseTabs>\n            </div>\n        </section>\n    </main>\n</template>\n\n<script>\nimport gotoPage from '@/helpers/gotoPage';\nimport numberFormat from '@/helpers/numberFormat';\nimport CartAmountButtons from '@/components/CartAmountButtons.vue';\nimport axios from 'axios';\nimport { API_BASE_URL } from '@/config';\nimport { mapActions } from 'vuex';\nimport getColorCode from \"@/helpers/getColorCode\";\nimport BaseTabs from \"@/components/BaseTabs.vue\";\nimport BaseTab from \"@/components/BaseTab.vue\";\nimport MainPropOptions from \"@/components/MainPropOptions.vue\";\n\nexport default {\n    data() {\n        return {\n            productAmount: 1,\n            productData: null,\n            productLoading: false,\n            productLoadingFailed: false,\n            productAdded: false,\n            productAddSending: false,\n            colorId: null,\n            productId: null\n        }\n    },\n    components: { CartAmountButtons, BaseTabs, BaseTab, MainPropOptions },\n    filters: {\n        numberFormat\n    },\n    computed: {\n        product() {\n            return this.productData\n                ? { ...this.productData, image: this.productData.preview.file.url }\n                : {};\n        },\n        category() {\n            return this.productData.category;\n        }\n    },\n    methods: {\n        ...mapActions(['addProductToCart']),\n        gotoPage,\n        getColorCode,\n        addToCart() {\n            this.productAdded = false;\n            this.productAddSending = true;\n\n            this.addProductToCart({ productId: this.productId, amount: this.productAmount, colorId: this.colorId })\n                .then(() => {\n                    this.productAdded = true;\n                    this.productAddSending = false;\n                });\n        },\n        incrementAmount() {\n            return ++this.productAmount;\n        },\n        decrementAmount() {\n            if (this.productAmount > 1) {\n                return --this.productAmount;\n            }\n        },\n        loadProduct() {\n            this.productLoading = true;\n            this.productLoadingFailed = false;\n\n            axios.get(API_BASE_URL + '/api/products/' + this.$route.params.id)\n                .then(response => this.productData = response.data)\n                .then(() => {\n                    this.colorId = this.product.colors[0].color.id;\n                    this.productId = this.product.id;\n                    this.productOfferId = this.product.offers[0].id;\n                })\n                .catch(() => this.productLoadingFailed = true)\n                .then(() => this.productLoading = false);\n        }\n    },\n    watch: {\n        '$route.params.id': {\n            handler() {\n                this.loadProduct();\n            },\n            immediate: true\n        }\n    }\n}\n</script>"],"mappings":";AAkIA,OAAAA,QAAA;AACA,OAAAC,YAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,KAAA;AACA,SAAAC,YAAA;AACA,SAAAC,UAAA;AACA,OAAAC,YAAA;AACA,OAAAC,QAAA;AACA,OAAAC,OAAA;AACA,OAAAC,eAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,aAAA;MACAC,WAAA;MACAC,cAAA;MACAC,oBAAA;MACAC,YAAA;MACAC,iBAAA;MACAC,OAAA;MACAC,SAAA;IACA;EACA;EACAC,UAAA;IAAAjB,iBAAA,EAAAA,iBAAA;IAAAK,QAAA,EAAAA,QAAA;IAAAC,OAAA,EAAAA,OAAA;IAAAC,eAAA,EAAAA;EAAA;EACAW,OAAA;IACAnB,YAAA,EAAAA;EACA;EACAoB,QAAA;IACAC,OAAA,WAAAA,QAAA;MACA,YAAAV,WAAA,GAAAW,aAAA,CAAAA,aAAA,KACA,KAAAX,WAAA;QAAAY,KAAA,OAAAZ,WAAA,CAAAa,OAAA,CAAAC,IAAA,CAAAC;MAAA,KACA;IACA;IACAC,QAAA,WAAAA,SAAA;MACA,YAAAhB,WAAA,CAAAgB,QAAA;IACA;EACA;EACAC,OAAA,EAAAN,aAAA,CAAAA,aAAA,KACAlB,UAAA;IACAL,QAAA,EAAAA,QAAA;IACAM,YAAA,EAAAA,YAAA;IACAwB,SAAA,WAAAA,UAAA;MAAA,IAAAC,KAAA;MACA,KAAAhB,YAAA;MACA,KAAAC,iBAAA;MAEA,KAAAgB,gBAAA;QAAAd,SAAA,OAAAA,SAAA;QAAAe,MAAA,OAAAtB,aAAA;QAAAM,OAAA,OAAAA;MAAA,GACAiB,IAAA;QACAH,KAAA,CAAAhB,YAAA;QACAgB,KAAA,CAAAf,iBAAA;MACA;IACA;IACAmB,eAAA,WAAAA,gBAAA;MACA,cAAAxB,aAAA;IACA;IACAyB,eAAA,WAAAA,gBAAA;MACA,SAAAzB,aAAA;QACA,cAAAA,aAAA;MACA;IACA;IACA0B,WAAA,WAAAA,YAAA;MAAA,IAAAC,MAAA;MACA,KAAAzB,cAAA;MACA,KAAAC,oBAAA;MAEAX,KAAA,CAAAoC,GAAA,CAAAnC,YAAA,2BAAAoC,MAAA,CAAAC,MAAA,CAAAC,EAAA,EACAR,IAAA,WAAAS,QAAA;QAAA,OAAAL,MAAA,CAAA1B,WAAA,GAAA+B,QAAA,CAAAjC,IAAA;MAAA,GACAwB,IAAA;QACAI,MAAA,CAAArB,OAAA,GAAAqB,MAAA,CAAAhB,OAAA,CAAAsB,MAAA,IAAAC,KAAA,CAAAH,EAAA;QACAJ,MAAA,CAAApB,SAAA,GAAAoB,MAAA,CAAAhB,OAAA,CAAAoB,EAAA;QACAJ,MAAA,CAAAQ,cAAA,GAAAR,MAAA,CAAAhB,OAAA,CAAAyB,MAAA,IAAAL,EAAA;MACA,WACA;QAAA,OAAAJ,MAAA,CAAAxB,oBAAA;MAAA,GACAoB,IAAA;QAAA,OAAAI,MAAA,CAAAzB,cAAA;MAAA;IACA;EAAA,EACA;EACAmC,KAAA;IACA;MACAC,OAAA,WAAAA,QAAA;QACA,KAAAZ,WAAA;MACA;MACAa,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}